---
title: "Create/Update Listing"
api: "POST https://api.travtus.com/listing/"
description: "This endpoint creates or updates a listing with the provided information."
---

This endpoint firstly attempts to match the data you have provided to an existing unit via the identifier body parameter, in order to update an existing entry.

If a unit is not found via the identifier or the identifier parameter is not set, the endpoint attempts to match an existing unit via the address.

### Header

<ParamField header="Auhtorization" type="string" default="none" required>
  The authentication token for your request
</ParamField>

### Body

<ParamField body="identifier" type="string" default="none">
  A unique identifier for the unit.

  This will be used when determining whether a unit needs to be updated or created.

  If this matches a unit in the group you have specified (or in all of your groups if you've specified none) that unit will be updated, otherwise a new one will be created.

  The identifier for a unit can not be updated once it has been set.

  When creating a new unit, a random, unique identifier will be set.

  Any value passed in this request will only be used for finding an existing unit.
</ParamField>

<ParamField body="external_ref" type="string" default="none">
  An external reference for the unit you want to create.

  This is typically an identifier you may use for unit records in your own system.

  Please not that this needs to be unique within the groups you are adding this unit to.

  If you provide an external reference that is already present in a group, the existing unit will be updated instead.

  The external reference will also be used to match a unit and the operation will fail if there is a mismatch between the unit retrieved via identifier or address and the unit retrieved via external reference.
</ParamField>

<ParamField body="unit_number" type="string" default="none">
  The unit's number.
</ParamField>

<ParamField body="has_flex_wall" type="boolean" default="none">
  True if the unit is a flex apartment, false if it is not.
</ParamField>

<ParamField body="number_of_bathrooms" type="integer" default="none">
  The unit's number of bathrooms.
</ParamField>

<ParamField body="number_of_bedrooms" type="integer" default="none">
  The unit's number of bedrooms.
</ParamField>

<ParamField body="sqft" type="integer" default="none">
  The square feet surface for the unit.
</ParamField>

<ParamField body="bathrooms" type="[object]" default="none">
  A list of bathroom characteristics for each bathroom in the unit.
  <Expandable title="bathroom">
    <ParamField body="has_shower_or_bath" type="boolean" default="none">
      Does the bathroom have either a shower or a bath?
    </ParamField>
    <ParamField body="has_sink" type="boolean" default="none">
      Does the bathroom have a sink?
    </ParamField>
    <ParamField body="has_toilet" type="boolean" default="none">
      Does the bathroom have a toilet?
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="address" type="object" default="none">
  Address information for the unit to be added.
  <Expandable tilte="address">
    <ParamField body="building_name" type="string">
      The name of the building.
    </ParamField>
    <ParamField body="address_line_1" type="string" required>
      The first line of the unit's address.
    </ParamField>
    <ParamField body="address_line_2" type="string">
      The second line of the unit's address.
    </ParamField>
    <ParamField body="city" type="string">
      The city of the unit's address.
    </ParamField>
    <ParamField body="country" type="string">
      The country of the unit's address.
    </ParamField>
    <ParamField body="state" type="string" required>
      The state in which the unit's address is located.
    </ParamField>
    <ParamField body="postal_code" type="string" required>
      The postal code of the unit's address.
    </ParamField>
    <ParamField body="latitude" type="float">
      The latitude of the unit's address.
    </ParamField>
    <ParamField body="longitude" type="float">
      The longitude of the unit's address.
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="groups" type="[string]" default="none">
  A list of group IDs.

  Used when searching for an existing unit record to update, if an external reference is provided.

  If you do not have access to one of the groups you have provided, the endpoint will not attempt to match the unit record against records in that group and any newly created units will not be assigned to the group. 
</ParamField>

### Response

<ResponseField name="success" type="boolean">
  True if the unit has been successfully created, false otherwise.
</ResponseField>
<ResponseField name="indentifier" type="string">
  The internal identifier for the newly created or updated unit.
</ResponseField>

### Errors

Listed below are common errors that may be returned by the endpoint, along with their corresponding status code.

Status Code - 400
```json Missing Authorization header
{
   "error": {
    "type": "missing_authorization",
    "message": "Your request does not include an 'Authorization' header with a bearer token for your account."
  }
}
```

Status Code - 401
```json Invalid/Expired Authorization header bearer token value
{
   "error": {
    "type": "invalid_authorization",
    "message": "The bearer token you have provided in the 'Authorization' header is invalid."
  }
}
```

Status Code - 400

Returned if an external reference is supplied, without supplying any group IDs
```json No group IDs supplied for unit with external reference
{
   "error": {
    "type": "no_group_ids",
    "message": "You must provide at least one group ID if you are providing an external reference."
  }
}
```

Status Code - 400

Returned if there is mismatch between the unit matched via identifier or address and the unit matched via the external reference
```json Mismatch between the retrieved unit and the external reference
{
   "error": {
    "type": "existing_external_ref",
    "message": "The unit matched via the provided identifier or address does not match the external reference you have provided."
  }
}
```

<RequestExample>

```bash Example Request
curl --location --request "POST 'https://api.travtus.com/units/' \
--header 'Content-Type: application/json' \
--header 'Authorization: bearer <token>' \
--data-raw '{
    "identifier": "unit-id-1",
    "external_ref": "unit-ext-ref-1",
    "has_flex_wall": false,
    "number_of_bathrooms": 2,
    "number_of_bedrooms": 1,
    "sqft": 40,
    "unit_number": "2",
    "bathrooms": [
      {
        "has_shower_or_bath": false,
        "has_sink": true,
        "has_toilet": true
      },
      {
        "has_shower_or_bath": true,
        "has_sink": true,
        "has_toilet": true
      }
    ],
    "address": {
      "building_name": "Building 1",
      "address_line_1": "Blvd Street",
      "address_line_2": "Appartment 12",
      "city": "New York",
      "country": "United States",
      "state": "New York",
      "postal_code": "10001",
      "latitude": 40.730610,
      "longitude": -73.935242
    },
    "groups": ["group-1", "group-2"]
}'
```

</RequestExample>

<ResponseExample>

```json Response
{
  "success": true,
  "identifier": "unit-id-1"
}
```

</ResponseExample>
